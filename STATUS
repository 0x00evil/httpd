Apache 1.3 STATUS:

Release:

    1.3b7: freeze; Hopefully to simply be renamed 1.3.0

    1.3b6: Tagged APACHE_1_3b6. Possible release 4/17

    2.0  : In pre-alpha development, see apache-2.0 repository

Guidelines:

    o For the past few months we have been working on a commit-then-review
      basis.  It is now time to decide whether or not we want to work
      under the guidelines in <http://dev.apache.org/guidelines.html>
      or not, and if not, what changes are needed to make it right.

      Approve guidelines as written:
         +1: Paul, Jim, Martin, Ralf, Randy, Brian, Ken
         +0:
         -1:

      Notes:
      - Ken: 'lazy consensus' needs to be defined.
      - Ralf: At least the following points should be added:
              1. A statement that really everyone has the equal right to veto
                 in general and that only the one can rescind a veto who has
                 done it originally.
              2. The statements that although a veto can be done at any point
                 if it gets done more then approximately two weeks after some
                 stuff already went in or was changed, the guy who vetoes
                 really  _HAS_ to provide a reasonable alternative solution
                 idea _AND_ at least someone (not really the guy who vetoes)
                 who wants to volunteer for this alternative solution.  Or
                 the veto will not make much sense IMHO at this stage and
                 always just creates flamewars! I think only this way it's
                 fair.

Plan:

   Apache 1.3b6 Release:

   - Wednesday, April 15: 
     Rolling the 1.3b6 tarball and pushing the version
     number to Apache 1.3b7

   - Thursday, April 16: 
     Double-checking the rolled 1.3b6 tarball

   - Friday, April 17:
     Moving the tarball to the public locations and sending
     the Announcement message to the public

   - ...ENTERING THE LONG-AWAITED FINAL 1.3.0 RELEASE STEP.... Hmmmm...

Showstoppers:

Committed Code Changes:

    * Lars' Configure fix to avoid confusing message under APACI control
    * Ralf's Configure fix for AWK's failing with "string to long" error

Available Patches:

    * Arnt Gulbrandsen <agulbra@troll.no> 03 Apr 1998 21:28:17 +0200
      <m3emzer9gu.fsf@lupinella.troll.no> mod_usertrack.c patch:
      The patch provides per-domain cookies (which I use to share user-ids
      among the *.troll.no web servers) and configurable cookie names.  It
      also marginally increases the efficiency of Apache when the server
      runs with DNS lookups turned off.

In progress:

    * Ken's IndexFormat enhancement to mod_autoindex to allow
      CustomLog-like tailoring of directory listing formats

FINAL RELEASE SHOWSTOPPERS:

    * proxy security fixes from 1.2.5 need to be brought forward

    * Someone other than Dean has to do a security/correctness review on
      psprintf(), bprintf(), and ap_snprintf().  In particular these routines
      do lots of fun pointer manipulations and such and possibly have overflow
      errors.  The respective flush_funcs also need to be exercised.

Needs patch:

    * Documentation for:
      1) htdocs/manual/sourcereorg.html and other files should mention 
         new mod_so capabilities.
      2) windows.html should be cleaned up.

    * uri issues
	- RFC2068 requires a server to recognize its own IP addr(s) in dot
	notation, we do this fine if the user follows the dns-caveats
	documentation... we should handle it in the case the user doesn't ever
	supply a dot-notation address.

Closed issues:

Open issues:
    
    * Paul would like to see a 'gdbm' option because he uses
      it a lot.

    * The binary should have the same name on Win32 and UNIX.
	+1: Ken
	-1:  

    * What do we call the binary: apache or httpd? Under UNIX
      it's httpd, under Win32 it's apache.
	apache-httpd: Ken +1
	leave it apache: +1 Brian, Ralf, Martin

    * Maybe a http_paths.h file? See
	<Pine.BSF.3.95q.971209222046.25627D-100000@valis.worldgate.com>
	+1: Brian, Paul, Ralf, Martin

    * Release builds: Should we provide Configuration or not?
      Should we 'make all suexec' in src/support?
	Ken +1 (possible suexec path issue, though)
        Brian +1

    * root's environment is inherited by the Apache server. Jim & Ken
      think we should recommend using 'env' to build the
      appropriate environment. Marc and Alexei don't see any
      big deal. Martin says that not every "env" has a -u flag.

    * 206 vs. 200 issue on Content-Length
	See <Pine.BSF.3.95q.971102000930.5555B-100000@valis.worldgate.com>
	Roy says sending 200 is correct, but Alexei disagrees.
	Marc sides with Alexei.  We were talking about two different PRs.
        Apache should be sending 200 *and* Accept-Ranges.

    * Marc's socket options like source routing (kill them?)
	Marc, Martin say Yes

    * Ken's PR#1053: an error when accessing a negotiated document
      explicitly names the variant selected.  Should it do so, or should
      the base input name be referenced?

    * Proposed API Changes:

	- r->content_language is for backwards compatibility... with modules
	  that may not link any longer without some minor editing.  The new
	  field is r->content_languages.  Heck it's not even mentioned in
	  apache-devsite/mmn.txt when we got content_languages (note the s!).
	  The proposal is to remove r->content_language:
	    Status: Paul +1, Ralf +1, Ken +1

	- child_exit() is redundant, it can be implemented via cleanups.  It is
	  not "symmetric" in the sense that there is no exit API method to go
	  along with the init() API method.  There is no need for an exit
	  method, there are already modules using cleanups to perform this (see
	  mod_mmap_static, and mod_php3 for example).  The proposal is to
	  remove the child_exit() method and document cleanups as the method of
	  handling this need.
	    Status: Rasmus +1, Paul +1, Jim +1, 
	            Martin +1, Ralf +1, Ken +1

    * Don't wait for WIN32:  It's been quite some time and WIN32 doesn't seem
	to be progressing, and Unix seems quite stable.  It would be in Apache's
	best interest to continue to support Unix to its utmost, and not delay
	a release of 1.3.0 waiting for WIN32 issues to be resolved.

	Proposal: the next release should be named 1.3b6, and labelled "release
	    candidate on unix, beta on NT".  The release after that will be
	    called 1.3.0 "stable on unix, beta on NT".
	    +1: Jim, Ralf, Randy, Brian, Martin
	    +0: 

            Notes:
            Randy: I would also argue that 1.3b6 is _not_ stable. I've been 
                   having real fits keeping it alive on a dual processor
                   machine. Could be OS problems..

Win32 specific issues:

 Open issues:

    * Should ApacheCore.dll be merged back into the main server
      image?  May make debugging easier..

 In progress:

    * Ben's ASP work... All agree it sounds cool.

    * DDA's adding a tray application to the Windoze version for ease of
      status/management.
	<01BCDB29.2C04DEB0@caravan.individual.com>
	<01BCDB2A.F8C09010@caravan.individual.com>
	Status: Ken +1, Sameer +1, Martin +1, Ben +1 (as long as
	we get a single executable)
	Paul: No like Win95 specific stuff
	Ken: What's W95-specific about it?

 Help:

    * process/thread model
	- need dynamic thread creation/destruction, similar to 
	  Unix process model
	- can't use WaitForMultipleObjects in the same way we
	  do now, since that has a limit of 64(!) objects.  Grr.
	  PR#1665

    * some errors printed by CGIs to stderr don't end up making it
      to the server log unless an extra debugging message is added
      after they run? (PR#1725 indicates this may not be just Win32)

    * handle bugs that make it pop up errors on console, ie. segv 
      equiv?  Can we do this?  Need to make it robust.

    * install
	- make installshield work
	- config in cvs tree?
	- install docs, etc.?
	- location for install

    * the mutex should be critical-regions, since the current design
      is creating a mess of SO calls that are unnecessary

    * we don't mmap on NT.  Use TransmitFile?

    * CGIs
        - hangs on multiple CGI execution?  PR#1607,1129
    	    Marc can't repeat...
	- docs on how they work w/scripts
	- use registry to find interpreter?
	- WTF is the buffering coming from?
	    - we don't have a way to make non-blocking files on NT!

    * performance

    * documentation:
	- running the server without admin
	- how CGIs work
	- update README.NT
	- short/long name handling
	- better status page on current state of NT for users

    * http_main.c hell
	- split into two files?

    * who should run the service?  Who exactly is the "system account"?

      docs say:

      Localsystem is a very privileged account locally, so you shouldn't run
      any shareware applications there. However, it has no network privileges
      and cannot leave the machine via any NT-secured mechanism, including
      file system, named pipes, DCOM, or secure RPC.

      and:

      A service that runs in the context of the LocalSystem account
      inherits the security context of the SCM. It is not associated with
      any logged-on user account and does not have credentials (domain
      name, user name, and password) to be used for verification. This
      has several implications: [... removed ...]


      That _really_ sucks.  Can we recommend running Apache as some 
      other user?


    * need a crypt() of some sort.
	- sources are easy; problem is export restrictions on DES
	- if we don't do DES, can do md5

    * modules that need to be made to work on win32
        - mod_example isn't multithreadreded
	- mod_unique_id (needs mt changes)
	- mod_auth_db.c  (do we want to even try this?  We should have some
          db of some sort... what else can we pick from under win32?)
	- mod_auth_dbm.c
	- mod_info.c (PR re exporting symbols for it...)
	- mod_log_agent.c
	- mod_log_referer.c
	- mod_mime_magic.c (needs access to mod_mime API stage...)

    * do something to disable bogus warnings

    * rfc1413.c has static storage which won't work multithreaded

    * mod_include --> exec cgi, exec cmd, etc. don't work right.
      Looks like a code path that isn't run anywhere else that has
      something not quite right...  A PR or two on it.

WIN32 1.3 FINAL RELEASE SHOWSTOPPERS:

    * CGIs
        - hangs on multiple CGI execution?  PR#1607,1129
    	    Marc can't repeat...

    * SECURITY: PR#1203 still needs to be dealt with for WIN32

    * SECURITY: check if the magic con/aux/nul/etc names do anything
	really bad

    * SECURITY: numerous uses of strcpy and strcat have potential
	for buffer overflow, someone should rewrite or verify
	they're safe

    * SECURITY: os_ abstract is_only_below() in mod_include.c

    * signal type handling
    	- how to rotate logs from command line?

    * bad use of chdir in some places; it isn't thread-specific

