<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Apache HTTP Server Project</TITLE>
</HEAD>

<!-- Background white, links blue (unvisited), navy (visited), red (active) -->
<BODY
 BGCOLOR="#FFFFFF"
 TEXT="#000000"
 LINK="#0000FF"
 VLINK="#000080"
 ALINK="#FF0000"
>
<!--#include virtual="header.html" -->
<H1 ALIGN="CENTER">Known Bugs in Apache</H1>

The most up-to-date resource for bug tracking and information is the
<A HREF="http://www.apache.org/bugdb.cgi">Apache bug database</A>.
Significant bugs at release time will also be noted there.
If you are running a 1.2 beta release or version 1.1.3 or earlier
and think you have found a bug, please upgrade to 1.2. Many bugs
in early versions have been fixed in 1.2.  It is also appreciated
if you could check the latest 1.3 beta releases, or at least review
the <A HREF="http://www.apache.org/dist/CHANGES">CHANGES</A> file
for it and ensure that your problem has not already been corrected.

<P>This document is not a complete list of known bugs, but simply
a list of some of the more common ones.  <FONT COLOR="red">Be sure
to check the bug database before assuming that if it isn't listed
here it isn't reported or fixed.</FONT>

<P>See Also: <A HREF="compat_notes.html">Compatibility notes</A>,
and <A HREF="known_client_problems.html">our list of known client problems.</A></P>
<HR>

<H2>Apache 1.3b3 Bugs</H2>

<OL>
<LI>The error_log may contain "(0)Unknown error: mmap_handler:
    mmap failed" errors.  Ignore them, it is a logic error and does not
    indicate any problem.  This will be corrected in a later beta.
<LI>Servers operating in inetd mode will not properly implement timeouts.
    (Neither do servers operating with the -X command line switch for
    debugging.)
    This will be corrected in a later beta.  A workaround for now is
    to edit <code>src/main/httpd.h</code> and remove the definition
    of <code>OPTIMIZE_TIMEOUTS</code> near the bottom.
<LI><b>Win32 only:</b> Building from source may fail because the buildmark.obj
    file does not exist. Edit <CODE>Makefile.nt</CODE> and replace the
    line <CODE>del CoreR\buildmark.obj</CODE> with <CODE>-del
    CoreR\buildmark.obj</CODE> (and similarly for <CODE>del
    CoreD\buildmark.obj</CODE>). See 
    <A HREF="http://bugs.apache.org/index/full/1473">PR#1473</A>.
</OL>

<H2>Apache 1.3b2 Bugs</H2>

<H3>Win32 only</H3>
<OL>
<LI>CGI scripts that are called with information appended to the script
    name that does <STRONG>not</STRONG> have an "<CODE>=</CODE>" in it
    do not work. 
    See <A HREF="http://bugs.apache.org/index/full/1030">PR#1030</A>
<LI>Passwords stored in htpasswd files need to be stored in plain text,
    since we do not yet have a <CODE>crypt()</CODE> under Win32.
<LI>On Windows 95, <CODE>DirectoryIndex</CODE> does not work.
    See <A HREF="http://bugs.apache.org/index/full/1266">PR#1266</A>
<LI>On some versions of Windows 95, CGI scripts fail and paths given
    with "#!" must contains \ instead of /.
<LI>When a CGI starts with "#!" to indicate an interpreter there must
    be no space between the #! and the path.
    See <A HREF="http://bugs.apache.org/index/full/1101">PR#1101</A>
<LI>If the CGI program cannot be run Apache logs a "premature end-of-headers"
    error instead of an error about running the program.
    See <A HREF="http://bugs.apache.org/index/full/1257">PR#1257</A>
</OL>
<H3>Unix only</H3>
<OL>
<LI>The USE_FLOCK_SERIALIZED_ACCEPT define is completely broken and does
    not work at all.  It has been this way since birth.  A fix is pending.
</OL>
<HR>
<H2>Apache 1.3a1 Bugs</H2>

<OL>
  <LI>The <code><a href="../mod/core.html#listen">Listen</a></code>
      directive does not work when running under Windows.
  <LI>For some reason, <a href="../mod/mod_isapi.html">mod_isapi</a>
      does not work (with Windows) when compiled using the
      <code>Release</code> setting; it will crash the server whenever you
      access an ISA DLL. It works fine when the server is compiled with
      <code>Debug</code>.
</OL>
      
<H2>Apache 1.2 Bugs</H2>
<H3>Bugs still present in 1.2.4</H3>
<OL>
    <LI><a name="listenbug">On some architectures</A>
    if your configuration uses multiple
    <a href="../mod/core.html#listen">Listen</a> directives then it is possible
    that the server will starve one of the sockets while serving hits on
    another.  The work-around is to add
    <code>-DUSE_FLOCK_SERIALIZED_ACCEPT</code> to the
    <code>EXTRA_CFLAGS</code> line in your Configuration and rebuild.
    (If you encounter problems with that, you can also try
    <code>-DUSE_FCNTL_SERIALIZED_ACCEPT</code>.)
    This affects any architecture that doesn't use one of the
    <code>USE_xxxxx_SERIALIZED_ACCEPT</code> definitions, see the
    source file <code>conf.h</code> for your architecture.
    This is being tracked as
    <a href="http://www.apache.org/bugdb.cgi/full/467">PR#467</a>.
    <P>To resolve this problem, we are adding one of the above settings
    to the default settings for platforms as we discover which is 
    appropriate for them.  <b>New as of 1.3b3:</b> the server will
    issue a warning when your architecture/config are subject to
    this bug.  The fixes and such are described in the PORTING
    file.  We are closing out this bug.
    </LI><P>

    <LI>
    The PATH_INFO part of a request URI cannot include the sequence
    <CODE>%2f</CODE>. This will be tracked as
    <A HREF="http://www.apache.org/bugdb.cgi/full/543">PR#543</A>.
    </LI><P>

    <LI>Users of early 1.2 betas reported problems with many
    connections stuck in the FIN_WAIT_2 state due to server
    timeouts. Several changes were made during the beta testing of 1.2
    to reduce this problem as much as possible, although you may still
    see sockets in FIN_WAIT_2 state due to network or operating system
    issues outside the control of Apache. See our <A
    HREF="fin_wait_2.html">FIN_WAIT_2</A> page for more details.

    <P>SunOS4 has a kernel bug in the allocation of memory for the mbuf table.
    When it fills up, the result is a Panic the next time any routine tries
    to set something in an imaginary mbuf beyond the range of the table.
    Due to buggy browser behavior and the lack of a FIN_WAIT_2 timeout
    on SunOS4, "KeepAlive Off" is necessary to avoid filling up the mbuf
    table on busy sites.
    </LI><P>

    <LI>
    Compiling on Solaris 2 with SunSoft's C compiler gives the warning
    <CODE>"mod_include.c", line 1123: warning: end-of-loop code not
    reached</CODE>. This is a bogus warning and can be ignored.
    See <A HREF="http://www.apache.org/bugdb.cgi/full/681">PR#681</A>.
    </LI><P>

    <LI>If compilation fails complaining about "unknown symbol __inet_ntoa()"
    then you have probably installed version 8 of bind. You will need to
    explicitly link with the bind library by adding <CODE>-lbind</CODE>
    to <CODE>EXTRA_LDFLAGS</CODE> in <CODE>Configuration</CODE>. See
    <A HREF="http://www.apache.org/bugdb.cgi/full/616">PR#616</A>
    and the
    <A HREF="FAQ.html#bind8.1">Apache FAQ</A>.  This is not a bug
    in Apache.
    </LI><P>

    <LI>The message "<CODE>created shared memory segment #730499</CODE>"
    in error_log is not an error and should be ignored. See
    <a href="http://www.apache.org/bugdb.cgi/full/696">PR#696</A>.
    </LI><P>
</OL>

<H3>Fixed in 1.2.4:</H3>
<OL>
    <LI>
    On Solaris 2.x the server will stop running after receiving a
    SIGHUP.  Four workarounds exist (choose one):<p>
    <ul>
	<li>Recommended: upgrade to 1.2.4.
	<li>If you are running Apache 1.2.1, retrieve 
	<a href="http://www.apache.org/dist/patches/apply_to_1.2.1/solaris_hup.patch">this patch</a>.
	<code>cd</code> to your <code>apache_1.2.1</code> directory, and
	type <code>patch -s -p1 &lt; /path/to/patchfile</code>.  Then rebuild
	Apache.<p>
	<li>Use SIGUSR1 instead of SIGHUP, see <a href="../stopping.html">
	Stopping and Restarting Apache</a> for more details.<p>
	<li>Add <code>-DNO_SLACK</code> to
	<code>EXTRA_CFLAGS</code> in
	your <code>Configuration</code> file, re-run <code>Configure</code>
	and rebuild your server.  This disables the
	<a href="descriptors.html">descriptor slack workaround</a>
    </ul><P>
    This problem was tracked as
    <a href="http://www.apache.org/bugdb.cgi/full/832">PR#832</a>.
    </li><P>

    <LI>(Exists in 1.2.0 and in 1.2.1 after either of the
    <code>NO_SLACK</code> or patch provided by the previous bug are applied.)
    Solaris 2.5.1 (and probably other versions of Solaris) appear to have
    a race condition completely unrelated to all the others.  It is possible
    during a SIGHUP that the server will fail to start because it will not
    be able to re-open its sockets.  To our knowledge this has only shown
    up during testing when we pummel the server with as many SIGHUP requests
    per second as we can.  This appears unrelated to the similar sounding bug
    described in <a href="http://www.apache.org/bugdb.cgi/full/832">PR#832</a>.
</OL>
<P>

<H3>Fixed in 1.2.1</H3>
<OL>
    <LI><a href="descriptors.html"><B>Workaround added</B></a>
    There appears to be a problem on BSDI 2.1 with large numbers of
    virtual hosts. This appears similar to a file-descriptor limit
    but BSDI should not have this problem. This will be tracked as
    <A HREF="http://www.apache.org/bugdb.cgi/full/611">PR#611</A>.
    See also the <A HREF="FAQ.html#fdlim">Apache FAQ</A>.
    </LI><P>

    <LI><a href="descriptors.html"><b>Workaround added.</b></a>
    Solaris 2 has problems with large numbers of virtual hosts. This is
    because of an operating system limit of 256 file pointers, not due
    to Apache.   See also the <A HREF="FAQ.html#fdlim">Apache FAQ</A>.
    </LI><P>

    <LI>
    <a name="cnegbug">Apache's</A> <A HREF="../content-negotiation.html">Content
    Negotiation</A> should pick the smallest variant if there
    are several that are equally acceptable. A bug in 1.2 means it no
    longer does this unless all the variants have character sets.
    This <A HREF="http://www.apache.org/dist/contrib/patches/1.2/conneg-bug.patch">patch</A>
    fixes this problem. It also fixes the problem which makes Apache
    pick the last equally acceptable variant instead of the first.
    This will be tracked as
    <a href="http://www.apache.org/bugdb.cgi/full/94">PR#94</a>.
    </LI><P>

    <LI><P>Compilation fails on SCO3 when using gcc instead of cc, complaining
    with "<CODE>gcc: noinline: No such file or directory</CODE>". Fix
    is given in <a href="http://www.apache.org/bugdb.cgi/full/695">PR#695</A>.
    </LI>
</OL>

<!--#include virtual="footer.html" -->
</BODY>
</HTML>

